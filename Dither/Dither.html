<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Image Dither App — Advanced</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header>
      <h1>Image Dither Lab</h1>
      <p>Drop or load an image, tweak sliders, and explore different dithering algorithms.</p>
    </header>

    <section class="controls">
      <label class="control-item">
        <span>Choose image:</span>
        <input type="file" id="imageInput" accept="image/*" />
      </label>

      <label class="control-item">
        <span>Dithering method:</span>
        <select id="methodSelect">
          <option value="floyd">Floyd–Steinberg</option>
          <option value="ordered">Ordered (4×4 Bayer)</option>
          <option value="atkinson">Atkinson</option>
          <option value="sierra">Sierra Lite</option>
          <option value="burkes">Burkes</option>
        </select>
      </label>

      <label class="control-item">
        <span>Output mode:</span>
        <select id="modeSelect">
          <option value="mono">Monochrome (B/W)</option>
          <option value="gray">Grayscale (no dithering)</option>
          <option value="palette">2-Color Palette</option>
        </select>
      </label>

      <div class="palette-group">
        <label>
          Foreground color
          <input type="color" id="fgColor" value="#ffffff" />
        </label>
        <label>
          Background color
          <input type="color" id="bgColor" value="#000000" />
        </label>
      </div>

      <div class="slider-group">
        <label>
          Brightness: <span id="brightnessVal">0</span>
          <input type="range" id="brightness" min="-100" max="100" value="0" />
        </label>

        <label>
          Contrast: <span id="contrastVal">100</span>
          <input type="range" id="contrast" min="0" max="300" value="100" />
        </label>

        <label>
          Gamma: <span id="gammaVal">1.0</span>
          <input type="range" id="gamma" min="0.1" max="3" step="0.1" value="1" />
        </label>

        <label>
          Threshold offset: <span id="thresholdVal">0</span>
          <input type="range" id="threshold" min="-128" max="128" value="0" />
        </label>

        <label>
          Downscale (%): <span id="scaleVal">100</span>
          <input type="range" id="scale" min="10" max="100" value="100" />
        </label>

        <label>
          Black point: <span id="blackVal">0</span>
          <input type="range" id="blackPoint" min="0" max="127" value="0" />
        </label>

        <label>
          White point: <span id="whiteVal">255</span>
          <input type="range" id="whitePoint" min="128" max="255" value="255" />
        </label>
      </div>

      <div class="buttons-group">
        <button id="ditherBtn">Apply Dither</button>
        <button id="downloadBtn" disabled>Download Result</button>
      </div>

      <p class="hint">
        Tip: You can also drag &amp; drop an image anywhere on this page.
      </p>
    </section>

    <section class="canvas-area">
      <div class="canvas-block">
        <h2>Original</h2>
        <canvas id="originalCanvas"></canvas>
      </div>

      <div class="canvas-block">
        <div class="canvas-block-header">
          <h2>Dithered</h2>
          <div class="zoom-controls">
            <label>
              Zoom: <span id="zoomVal">1.0×</span>
              <input type="range" id="zoomSlider" min="1" max="8" step="0.5" value="1" />
            </label>
          </div>
        </div>
        <div class="dithered-wrapper">
          <canvas id="ditheredCanvas"></canvas>
        </div>
      </div>

      <div class="canvas-block">
        <h2>Preview (scaled)</h2>
        <canvas id="previewCanvas"></canvas>
      </div>
    </section>

    <section class="debug-section">
      <h2>Debug Log</h2>
      <pre id="debugLog">(No logs yet)</pre>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
