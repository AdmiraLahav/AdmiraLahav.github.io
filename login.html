

====== login.html ======
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ly login</title>
<link rel="stylesheet" href="styles.css">
</head>
<body class="page-bg">
<main class="login-wrap">
<form id="loginForm" class="ly-login" autocomplete="off">
<h1 class="ly-title">login</h1>
<label class="field">username
<input id="user" name="user" value="admin" />
</label>
<label class="field">password
<input id="pass" name="pass" type="password" value="password" />
</label>
<div class="login-actions">
<button type="submit" class="btn no-focus">login</button>
<button type="button" id="showCreds" class="btn no-focus">show creds file</button>
</div>
<p id="msg" class="msg"></p>
</form>
</main>


<script>
// insecure intentionally. reads creds.json from same repo.
async function loadCreds(){
try{
const r = await fetch('creds.json');
return await r.json();
}catch(e){
return {username:'admin', password:'password'};
}
}


(async ()=>{
const creds = await loadCreds();
const form = document.getElementById('loginForm');
const msg = document.getElementById('msg');
document.getElementById('showCreds').addEventListener('click', async ()=>{
const c = await loadCreds();
alert('creds.json contents:\n' + JSON.stringify(c, null, 2));
});


form.addEventListener('submit', async (e)=>{
e.preventDefault();
const u = document.getElementById('user').value;
const p = document.getElementById('pass').value;
if(u === creds.username && p === creds.password){
// pass username via query for simple personalization
location.href = 'index.html?user=' + encodeURIComponent(u);
}else{
msg.textContent = 'login failed';
msg.style.color = 'var(--accent)';
}
});
})();
</script>
</body>
</html>
